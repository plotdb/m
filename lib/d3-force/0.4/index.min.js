!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-quadtree"),require("d3-collection"),require("d3-dispatch"),require("d3-timer")):"function"==typeof define&&define.amd?define(["exports","d3-quadtree","d3-collection","d3-dispatch","d3-timer"],t):t(n.d3_force=n.d3_force||{},n.d3_quadtree,n.d3_collection,n.d3_dispatch,n.d3_timer)}(this,function(n,t,e,r,i){"use strict";function o(n,t){function e(){var e,i,o=r.length,u=0,a=0;for(e=0;o>e;++e)i=r[e],u+=i.x,a+=i.y;for(u=u/o-n,a=a/o-t,e=0;o>e;++e)i=r[e],i.x-=u,i.y-=a}var r;return null==n&&(n=0),null==t&&(t=0),e.initialize=function(n){r=n},e.x=function(t){return arguments.length?(n=+t,e):n},e.y=function(n){return arguments.length?(t=+n,e):t},e}function u(n){return function(){return n}}function a(n){return n.x+n.vx}function f(n){return n.y+n.vy}function c(n){function e(){function n(n,t,r,o,u){if(t>p||g>o||r>M||x>u)return!0;if(!n.length){var a=h-n.data.x-n.data.vx,f=d-n.data.y-n.data.vy,c=a*a+f*f,l=i[e]+i[n.data.index];l*l>c&&(c=(l-(c=Math.sqrt(c)))/c,y+=a*c,s+=f*c)}}for(var e,u,h,d,v,y,s,g,x,p,M,q=r.length,m=t.quadtree(r,a,f),w=0;l>w;++w)for(e=0;q>e;++e)u=r[e],v=i[e]+o,y=s=0,h=u.x+u.vx,g=h-v,p=h+v,d=u.y+u.vy,x=d-v,M=d+v,m.remove(u).visit(n),u.vx+=y*c,u.vy+=s*c,m.add(u)}var r,i,o,c=.7,l=1;return"function"!=typeof n&&(n=u(null==n?1:+n)),e.initialize=function(t){var e,u,a=(r=t).length;for(i=new Array(a),o=0,e=0;a>e;++e)(i[e]=u=+n(r[e],e,r))>o&&(o=u)},e.iterations=function(n){return arguments.length?(l=+n,e):l},e.strength=function(n){return arguments.length?(c=+n,e):c},e.radius=function(t){return arguments.length?(n="function"==typeof t?t:u(+t),e):n},e}function l(n,t){return t}function h(n){function t(t){for(var e=0,r=n.length;s>e;++e)for(var i,o,u,c,l,d,v,y=0;r>y;++y)i=n[y],o=i.source,u=i.target,c=u.x+u.vx-o.x-o.vx,l=u.y+u.vy-o.y-o.vy,(d=c*c+l*l)?(d=Math.sqrt(d),d=(d-f[y])/d):(d=Math.random()*p,c=Math.cos(d),l=Math.sin(d),d=f[y]),d*=t*a[y],c*=d,l*=d,u.vx-=c*(v=h[y]),u.vy-=l*v,o.vx+=c*(v=1-v),o.vy+=l*v}function r(){if(c){var t,r,u=c.length,l=n.length,v=new Array(u),y=e.map(c,d);for(t=0;u>t;++t)v[t]=0;for(t=0,h=new Array(l);l>t;++t)r=n[t],r.index=t,"object"!=typeof r.source&&(r.source=y.get(r.source)),"object"!=typeof r.target&&(r.target=y.get(r.target)),++v[r.source.index],++v[r.target.index];for(t=0;l>t;++t)r=n[t],h[t]=v[r.source.index]/(v[r.source.index]+v[r.target.index]);a=new Array(l),i(),f=new Array(l),o()}}function i(){if(c)for(var t=0,e=n.length;e>t;++t)a[t]=+v(n[t])}function o(){if(c)for(var t=0,e=n.length;e>t;++t)f[t]=+y(n[t])}var a,f,c,h,d=l,v=u(.7),y=u(30),s=1;return null==n&&(n=[]),t.initialize=function(n){c=n,r()},t.links=function(e){return arguments.length?(n=e,r(),t):n},t.id=function(n){return arguments.length?(d=n,t):d},t.iterations=function(n){return arguments.length?(s=+n,t):s},t.strength=function(n){return arguments.length?(v="function"==typeof n?n:u(+n),i(),t):v},t.distance=function(n){return arguments.length?(y="function"==typeof n?n:u(+n),o(),t):y},t}function d(n){return n.x}function v(n){return n.y}function y(n){function t(){return h=0,g.restart(u),l}function o(){return g.stop(),l}function u(){var n=a();x.call("tick",l),n&&(g.stop(),x.call("end",l))}function a(){var t=Math.exp(++h*v);s.each(function(n){n(t)});for(var e,r=0,i=n.length;i>r;++r)e=n[r],e.x+=e.vx*=y,e.y+=e.vy*=y;return d>t}function f(){for(var t,e=0,r=n.length;r>e;++e){if(t=n[e],t.index=e,isNaN(t.x)||isNaN(t.y)){var i=M*Math.sqrt(e),o=e*q;t.x=i*Math.cos(o),t.y=i*Math.sin(o)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function c(t){return t.initialize&&t.initialize(n),t}var l,h=0,d=.001,v=-.02,y=.6,s=e.map(),g=i.timer(u),x=r.dispatch("tick","end");return null==n&&(n=[]),f(),l={restart:t,stop:o,tick:a,nodes:function(t){return arguments.length?(n=t,f(),s.each(c),l):n},alphaMin:function(n){return arguments.length?(d=n,l):d},alphaDecay:function(n){return arguments.length?(h=+n?Math.round(h*v/-n):0,v=-n,l):-v},drag:function(n){return arguments.length?(y=1-n,l):1-y},force:function(n,t){return arguments.length>1?(null==t?s.remove(n):s.set(n,c(t)),l):s.get(n)},on:function(n,t){return arguments.length>1?(x.on(n,t),l):x.on(n)}}}function s(){function n(n){var e,u=o.length,c=t.quadtree(o,d,v).visitAfter(r);for(f=n,e=0;u>e;++e)a=o[e],c.visit(i)}function e(){if(o){var n,t=o.length;for(c=new Array(t),n=0;t>n;++n)c[n]=+l(o[n],n,o)}}function r(n){var t,e,r,i,o,u=0;if(n.length){for(r=i=o=0;4>o;++o)(t=n[o])&&(e=t.value)&&(u+=e,r+=e*t.x,i+=e*t.y);n.x=r/u,n.y=i/u}else{t=n,t.x=t.data.x,t.y=t.data.y;do u+=c[t.data.index];while(t=t.next)}n.value=u}function i(n,t,e,r){if(!n.value)return!0;var i=n.x-a.x,o=n.y-a.y,u=r-t,l=i*i+o*o;if(l>u*u/s)return y>l&&(h>l&&(l=Math.sqrt(l/h),i/=l,o/=l,l=h),l=n.value*f/l,a.vx+=i*l,a.vy+=o*l),!0;if(!(n.length||l>=y)){h>l&&(l||(l=Math.random()*m,i=Math.cos(l),o=Math.sin(l),l=1),l=Math.sqrt(l/h),i/=l,o/=l,l=h);do n.data!==a&&(u=c[n.data.index]*f/l,a.vx+=i*u,a.vy+=o*u);while(n=n.next)}}var o,a,f,c,l=u(-100),h=1,y=1/0,s=.81;return n.initialize=function(n){o=n,e()},n.strength=function(t){return arguments.length?(l="function"==typeof t?t:u(+t),e(),n):l},n.distanceMin=function(t){return arguments.length?(h=t*t,n):Math.sqrt(h)},n.distanceMax=function(t){return arguments.length?(y=t*t,n):Math.sqrt(y)},n.theta=function(t){return arguments.length?(s=t*t,n):Math.sqrt(s)},n}function g(n,t){function e(n){for(var t,e,r=0,u=i.length;u>r;++r)t=i[r],e=o[r]*n,t.vx+=(a[r]-t.x)*e,t.vy+=(f[r]-t.y)*e}function r(){if(i){var e,r=i.length;for(o=new Array(r),a=new Array(r),f=new Array(r),e=0;r>e;++e)o[e]=+c(i[e],e,i),a[e]=+n(i[e],e,i),f[e]=+t(i[e],e,i)}}var i,o,a,f,c=u(.1);return"function"!=typeof n&&(n=u(null==n?0:+n)),"function"!=typeof t&&(t=u(null==t?0:+t)),e.initialize=function(n){i=n,r()},e.strength=function(n){return arguments.length?(c="function"==typeof n?n:u(+n),r(),e):c},e.x=function(t){return arguments.length?(n="function"==typeof t?t:u(+t),r(),e):n},e.y=function(n){return arguments.length?(t="function"==typeof n?n:u(+n),r(),e):t},e}var x="0.4.1",p=2*Math.PI,M=10,q=Math.PI*(3-Math.sqrt(5)),m=2*Math.PI;n.version=x,n.forceCenter=o,n.forceCollide=c,n.forceLink=h,n.forceManyBody=s,n.forcePosition=g,n.forceSimulation=y});