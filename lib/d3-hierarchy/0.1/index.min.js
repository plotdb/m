!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(n.d3_hierarchy=n.d3_hierarchy||{})}(this,function(n){"use strict";function r(n,r){return n.parent===r.parent?1:2}function e(n){return n.reduce(t,0)/n.length}function t(n,r){return n+r.x}function i(n){return 1+n.reduce(u,0)}function u(n,r){return Math.max(n,r.y)}function o(n){for(var r;r=n.children;)n=r[0];return n}function a(n){for(var r;r=n.children;)n=r[r.length-1];return n}function c(){function n(n){var r,h=0;n.eachAfter(function(n){var u=n.children;u?(n.x=e(u),n.y=i(u)):(n.x=r?h+=t(n,r):0,n.y=0,r=n)});var l=o(n),p=a(n),d=l.x-t(l,p)/2,s=p.x+t(p,l)/2;return n.eachAfter(f?function(r){r.x=(r.x-n.x)*u,r.y=(n.y-r.y)*c}:function(r){r.x=(r.x-d)/(s-d)*u,r.y=(1-(n.y?r.y/n.y:1))*c})}var t=r,u=1,c=1,f=!1;return n.separation=function(r){return arguments.length?(t=r,n):t},n.size=function(r){return arguments.length?(f=!1,u=+r[0],c=+r[1],n):f?null:[u,c]},n.nodeSize=function(r){return arguments.length?(f=!0,u=+r[0],c=+r[1],n):f?[u,c]:null},n}function f(n){var r,e,t,i,u=this,o=[u];do for(r=o.reverse(),o=[];null!=(u=r.pop());)if(n(u),e=u.children)for(t=0,i=e.length;i>t;++t)o.push(e[t]);while(o.length);return this}function h(n){for(var r,e,t=this,i=[t];null!=(t=i.pop());)if(n(t),r=t.children)for(e=r.length-1;e>=0;--e)i.push(r[e]);return this}function l(n){for(var r,e,t,i=this,u=[i],o=[];null!=(i=u.pop());)if(o.push(i),r=i.children)for(e=0,t=r.length;t>e;++e)u.push(r[e]);for(;null!=(i=o.pop());)n(i);return this}function p(n){return this.eachAfter(function(r){for(var e=+n(r.data)||0,t=r.children,i=t&&t.length;--i>=0;)e+=t[i].value;r.value=e})}function d(n){return this.eachBefore(function(r){r.children&&r.children.sort(n)})}function s(){for(var n=this,r=[n];n=n.parent;)r.push(n);return r}function v(){var n=[];return this.each(function(r){n.push(r)}),n}function x(){var n=[];return this.eachBefore(function(r){r.children||n.push(r)}),n}function y(n){for(var r,e,t,i,u,o=new m(n),a=+n.value&&(o.value=n.value),c=[o];null!=(r=c.pop());)if(a&&(r.value=+r.data.value),(t=r.data.children)&&(u=t.length))for(r.children=new Array(u),i=u-1;i>=0;--i)c.push(e=r.children[i]=new m(t[i])),e.parent=r,e.depth=r.depth+1;return o}function g(){return y(this).eachBefore(function(n){n.data=n.data.data})}function m(n){this.data=n,this.depth=0,this.parent=null}function w(n,r){for(var e=_(n,r),t=[n];n!==e;)n=n.parent,t.push(n);for(var i=t.length;r!==e;)t.splice(i,0,r),r=r.parent;return t}function _(n,r){if(n===r)return n;var e=n.ancestors(),t=r.ancestors(),i=null;for(n=e.pop(),r=t.pop();n===r;)i=n,n=e.pop(),r=t.pop();return i}function z(n){this._=n,this.next=null}function B(n){for(var r,e=(n=n.slice()).length,t=null,i=t;e;){var u=new z(n[e-1]);i=i?i.next=u:t=u,n[r]=n[--e]}return{head:t,tail:i}}function M(n){return q(B(n),[])}function A(n,r){var e=r.x-n.x,t=r.y-n.y,i=n.r-r.r;return i*i+1e-6>e*e+t*t}function q(n,r){var e,t,i,u=null,o=n.head;switch(r.length){case 1:e=r[0];break;case 2:e=E(r[0],r[1]);break;case 3:e=b(r[0],r[1],r[2])}for(;o;)i=o._,t=o.next,e&&A(e,i)?u=o:(u?(n.tail=u,u.next=null):n.head=n.tail=null,r.push(i),e=q(n,r),r.pop(),n.head?(o.next=n.head,n.head=o):(o.next=null,n.head=n.tail=o),u=n.tail,u.next=t),o=t;return n.tail=u,e}function E(n,r){var e=n.x,t=n.y,i=n.r,u=r.x,o=r.y,a=r.r,c=u-e,f=o-t,h=a-i,l=Math.sqrt(c*c+f*f);return{x:(e+u+c/l*h)/2,y:(t+o+f/l*h)/2,r:(l+i+a)/2}}function b(n,r,e){var t=n.x,i=n.y,u=n.r,o=r.x,a=r.y,c=r.r,f=e.x,h=e.y,l=e.r,p=2*(t-o),d=2*(i-a),s=2*(c-u),v=t*t+i*i-u*u-o*o-a*a+c*c,x=2*(t-f),y=2*(i-h),g=2*(l-u),m=t*t+i*i-u*u-f*f-h*h+l*l,w=x*d-p*y,_=(d*m-y*v)/w-t,z=(y*s-d*g)/w,B=(x*v-p*m)/w-i,M=(p*g-x*s)/w,A=z*z+M*M-1,q=2*(_*z+B*M+u),E=_*_+B*B-u*u,b=(-q-Math.sqrt(q*q-4*A*E))/(2*A);return{x:_+z*b+t,y:B+M*b+i,r:b}}function k(n,r,e){var t=n.x,i=n.y,u=r.r+e.r,o=n.r+e.r,a=r.x-t,c=r.y-i,f=a*a+c*c;if(f){var h=.5+((o*=o)-(u*=u))/(2*f),l=Math.sqrt(Math.max(0,2*u*(o+f)-(o-=f)*o-u*u))/(2*f);e.x=t+h*a+l*c,e.y=i+h*c-l*a}else e.x=t+o,e.y=i}function S(n,r){var e=r.x-n.x,t=r.y-n.y,i=n.r+r.r;return i*i>e*e+t*t}function I(n){this._=n,this.next=null,this.previous=null,this.score=n.x*n.x+n.y*n.y}function O(n){if(!(f=n.length))return n;var r,e,t,i,u,o,a,c,f;if(r=n[0],r.x=r.r,r.y=0,!(f>1))return n;if(e=n[1],e.x=-e.r,e.y=0,!(f>2))return n;k(e,r,t=n[2]),r=new I(r),e=new I(e),t=new I(t),r.next=t.previous=e,e.next=r.previous=t,t.next=e.previous=r;n:for(i=3;f>i;++i){if(k(r._,e._,t=n[i]),t=new I(t),(o=r.previous)===(u=e.next)){if(S(u._,t._)){r=e,e=u,--i;continue n}}else{a=u._.r,c=o._.r;do if(c>=a){if(S(u._,t._)){e=u,r.next=e,e.previous=r,--i;continue n}u=u.next,a+=u._.r}else{if(S(o._,t._)){r=o,r.next=e,e.previous=r,--i;continue n}o=o.previous,c+=o._.r}while(u!==o.next)}for(t.previous=r,t.next=e,r.next=e.previous=e=t;(t=t.next)!==e;)t.score<r.score&&(r=t);e=r.next}return n}function T(n){return null==n?null:j(n)}function j(n){if("function"!=typeof n)throw new Error;return n}function D(n){return Math.sqrt(n.value)}function L(){function n(n){return n.x=e/2,n.y=t/2,r?n.eachBefore(R(r)).eachAfter($(i/2)).eachBefore(C(1)):(n.eachBefore(R(D)).eachAfter(P),i&&n.eachAfter($(i*n.r/Math.min(e,t))),n.eachBefore(C(Math.min(e,t)/(2*n.r)))),n}var r=null,e=1,t=1,i=0;return n.radius=function(e){return arguments.length?(r=T(e),n):r},n.size=function(r){return arguments.length?(e=+r[0],t=+r[1],n):[e,t]},n.padding=function(r){return arguments.length?(i=Math.max(0,+r||0),n):i},n}function R(n){return function(r){r.children||(r.r=Math.max(0,+n(r)||0))}}function P(n){if(r=n.children){O(r);var r,e,t,i=M(r),u=r.length;for(t=0;u>t;++t)e=r[t],e.x-=i.x,e.y-=i.y;n.r=i.r}}function $(n){return function(r){if(e=r.children){var e,t,i=e.length;for(t=0;i>t;++t)e[t].r+=n;for(P(r),t=0;i>t;++t)e[t].r-=n;r.r+=n}}}function C(n){return function(r){var e=r.parent;r.r*=n,e&&(r.x=e.x+n*r.x,r.y=e.y+n*r.y)}}function F(n){n.x0=Math.round(n.x0),n.y0=Math.round(n.y0),n.x1=Math.round(n.x1),n.y1=Math.round(n.y1)}function G(n,r,e,t,i){for(var u,o=n.children,a=-1,c=o.length,f=(t-r)/n.value;++a<c;)u=o[a],u.y0=e,u.y1=i,u.x0=r,u.x1=r+=u.value*f}function H(n){var r=0;return n.eachBefore(function(n){n.depth>r&&(r=n.depth)}),r}function J(){function n(n){var o=H(n)+1;return n.x0=n.y0=i,n.x1=e,n.y1=t/o,n.eachBefore(r(t,o)),u&&n.eachBefore(F),n}function r(n,r){return function(e){e.children&&G(e,e.x0,n*(e.depth+1)/r,e.x1,n*(e.depth+2)/r);var t=e.x0,u=e.y0,o=e.x1-i,a=e.y1-i;t>o&&(t=o=(t+o)/2),u>a&&(u=a=(u+a)/2),e.x0=t,e.y0=u,e.x1=o,e.y1=a}}var e=1,t=1,i=0,u=!1;return n.round=function(r){return arguments.length?(u=!!r,n):u},n.size=function(r){return arguments.length?(e=+r[0],t=+r[1],n):[e,t]},n.padding=function(r){return arguments.length?(i=+r,n):i},n}function K(n){return n.id}function N(n){return n.parentId}function Q(){function n(n){var t,i,u,o,a,c,f,h=n.length,l=new Array(h),p={};for(i=0;h>i;++i)if(t=n[i],a=l[i]=new m(t),null!=(c=r(t,i,n))&&(c+="")){if(f=dn+(a.id=c),f in p)throw new Error("duplicate: "+c);p[f]=a}for(i=0;h>i;++i)if(a=l[i],c=e(n[i],i,n),null!=c&&(c+="")){if(o=p[dn+c],!o)throw new Error("missing: "+c);o.children?o.children.push(a):o.children=[a],a.parent=o}else{if(u)throw new Error("multiple roots");u=a}if(!u)throw new Error("no root");if(u.parent=sn,u.eachBefore(function(n){n.depth=n.parent.depth+1,--h}),u.parent=null,h>0)throw new Error("cycle");return u}var r=K,e=N;return n.id=function(e){return arguments.length?(r=j(e),n):r},n.parentId=function(r){return arguments.length?(e=j(r),n):e},n}function U(n,r){return n.parent===r.parent?1:2}function V(n){var r=n.children;return r?r[0]:n.t}function W(n){var r=n.children;return r?r[r.length-1]:n.t}function X(n,r,e){var t=e/(r.i-n.i);r.c-=t,r.s+=e,n.c+=t,r.z+=e,r.m+=e}function Y(n){for(var r,e=0,t=0,i=n.children,u=i.length;--u>=0;)r=i[u],r.z+=e,r.m+=e,e+=r.s+(t+=r.c)}function Z(n,r,e){return n.a.parent===r.parent?n.a:e}function nn(n,r){this._=n,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=r}function rn(n){for(var r,e,t,i,u,o=new nn(n,0),a=[o];null!=(r=a.pop());)if(t=r._.children)for(r.children=new Array(u=t.length),i=u-1;i>=0;--i)a.push(e=r.children[i]=new nn(t[i],i)),e.parent=r;return(o.parent=new nn(null,0)).children=[o],o}function en(){function n(n){var t=rn(n);if(t.eachAfter(r),t.parent.m=-t.z,t.eachBefore(e),c)n.eachBefore(i);else{var f=n,h=n,l=n;n.eachBefore(function(n){n.x<f.x&&(f=n),n.x>h.x&&(h=n),n.depth>l.depth&&(l=n)});var p=u(f,h)/2-f.x,d=o/(h.x+u(h,f)/2+p),s=a/(l.depth||1);n.eachBefore(function(n){n.x=(n.x+p)*d,n.y=n.depth*s})}return n}function r(n){var r=n.children,e=n.parent.children,i=n.i?e[n.i-1]:null;if(r){Y(n);var o=(r[0].z+r[r.length-1].z)/2;i?(n.z=i.z+u(n._,i._),n.m=n.z-o):n.z=o}else i&&(n.z=i.z+u(n._,i._));n.parent.A=t(n,i,n.parent.A||e[0])}function e(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function t(n,r,e){if(r){for(var t,i=n,o=n,a=r,c=i.parent.children[0],f=i.m,h=o.m,l=a.m,p=c.m;a=W(a),i=V(i),a&&i;)c=V(c),o=W(o),o.a=n,t=a.z+l-i.z-f+u(a._,i._),t>0&&(X(Z(a,n,e),n,t),f+=t,h+=t),l+=a.m,f+=i.m,p+=c.m,h+=o.m;a&&!W(o)&&(o.t=a,o.m+=l-h),i&&!V(c)&&(c.t=i,c.m+=f-p,e=n)}return e}function i(n){n.x*=o,n.y=n.depth*a}var u=U,o=1,a=1,c=null;return n.separation=function(r){return arguments.length?(u=r,n):u},n.size=function(r){return arguments.length?(c=!1,o=+r[0],a=+r[1],n):c?null:[o,a]},n.nodeSize=function(r){return arguments.length?(c=!0,o=+r[0],a=+r[1],n):c?[o,a]:null},n}function tn(n,r,e,t,i){for(var u,o=n.children,a=-1,c=o.length,f=(i-e)/n.value;++a<c;)u=o[a],u.x0=r,u.x1=t,u.y0=e,u.y1=e+=u.value*f}function un(n,r,e,t,i){for(var u,o,a,c,f=n._squarify,h=-1,l=f.length,p=n.value;++h<l;){for(u=f[h],o=u.children,a=u.value=0,c=o.length;c>a;++a)u.value+=o[a].value;u.dice?G(u,r,e,t,e+=(i-e)*u.value/p):tn(u,r,e,r+=(t-r)*u.value/p,i),p-=u.value}}function on(){return 0}function an(n){return function(){return n}}function cn(){function n(n){return n.x0=n.y0=0,n.x1=i,n.y1=u,n.eachBefore(r),o=[0],t&&n.eachBefore(F),n}function r(n){var r=o[n.depth],t=n.x0+r,i=n.y0+r,u=n.x1-r,p=n.y1-r;t>u&&(t=u=(t+u)/2),i>p&&(i=p=(i+p)/2),n.x0=t,n.y0=i,n.x1=u,n.y1=p,n.children&&(r=o[n.depth+1]=a(n)/2,t+=l(n)-r,i+=c(n)-r,u-=f(n)-r,p-=h(n)-r,t>u&&(t=u=(t+u)/2),i>p&&(i=p=(i+p)/2),e(n,t,i,u,p))}var e=vn,t=!1,i=1,u=1,o=[0],a=on,c=on,f=on,h=on,l=on;return n.round=function(r){return arguments.length?(t=!!r,n):t},n.size=function(r){return arguments.length?(i=+r[0],u=+r[1],n):[i,u]},n.tile=function(r){return arguments.length?(e=j(r),n):e},n.padding=function(r){return arguments.length?n.paddingInner(r).paddingOuter(r):n.paddingInner()},n.paddingInner=function(r){return arguments.length?(a="function"==typeof r?r:an(+r),n):a},n.paddingOuter=function(r){return arguments.length?n.paddingTop(r).paddingRight(r).paddingBottom(r).paddingLeft(r):n.paddingTop()},n.paddingTop=function(r){return arguments.length?(c="function"==typeof r?r:an(+r),n):c},n.paddingRight=function(r){return arguments.length?(f="function"==typeof r?r:an(+r),n):f},n.paddingBottom=function(r){return arguments.length?(h="function"==typeof r?r:an(+r),n):h},n.paddingLeft=function(r){return arguments.length?(l="function"==typeof r?r:an(+r),n):l},n}function fn(n,r,e,t,i){var u=n.children;hn(u,0,u.length,n.value,r,e,t,i)}function hn(n,r,e,t,i,u,o,a){if(r>=e-1)return n=n[r],n.x0=i,n.y0=u,n.x1=o,n.y1=a,void 0;var c=r,f=t/2,h=0;do h+=n[c].value;while(++c<e-1&&f>h);var l=t-h;if(a-u>o-i){var p=(u*l+a*h)/t;hn(n,r,c,h,i,u,o,p),hn(n,c,e,l,i,p,o,a)}else{var d=(i*l+o*h)/t;hn(n,r,c,h,i,u,d,a),hn(n,c,e,l,d,u,o,a)}}function ln(n,r,e,t,i){(1&n.depth?tn:G)(n,r,e,t,i)}var pn="0.1.0";m.prototype=y.prototype={constructor:m,each:f,eachAfter:l,eachBefore:h,sum:p,sort:d,ancestors:s,descendants:v,leaves:x,copy:g};var dn="$",sn={depth:-1};nn.prototype=Object.create(m.prototype);var vn=function xn(n){function r(r,e,t,i,u){if(r._squarify)return un(r,e,t,i,u);for(var o,a,c,f,h,l,p,d,s,v,x,y,g=r._squarify=[],m=r.children,w=0,_=m.length,z=r.value;_>w;){for(f=i-e,h=u-t,p=d=l=m[w].value,x=Math.max(h/f,f/h)/(z*n),y=l*l*x,v=Math.max(d/y,y/p),c=w+1;_>c;++c){if(l+=a=m[c].value,p>a&&(p=a),a>d&&(d=a),y=l*l*x,s=Math.max(d/y,y/p),s>v){l-=a;break}v=s}g.push(o={value:l,dice:h>f,children:m.slice(w,c)}),o.dice?G(o,e,t,i,t+=h*l/z):tn(o,e,t,e+=f*l/z,u),z-=l,w=c}}return r.ratio=function(n){return xn((n=+n)>1?n:1)},r}((1+Math.sqrt(5))/2,!1);n.version=pn,n.cluster=c,n.hierarchy=y,n.hierarchyPath=w,n.pack=L,n.packSiblings=O,n.packEnclose=M,n.partition=J,n.stratify=Q,n.tree=en,n.treemap=cn,n.treemapBinary=fn,n.treemapDice=G,n.treemapSlice=tn,n.treemapSliceDice=ln,n.treemapSquarify=vn});