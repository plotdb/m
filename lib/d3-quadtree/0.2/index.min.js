!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.d3_quadtree={})}(this,function(n){"use strict";function t(n){return n[0]}function e(n){return n[1]}function u(n){return function(){return n}}function r(){this.x=null,this.y=null,this.leaf=!0,this.data=null,this.nodes=[]}function i(n,t,e,u,r,f){if(!n(t,e,u,r,f)){var a=(e+r)/2,l=(u+f)/2,o=t.nodes;o[0]&&i(n,o[0],e,u,a,l),o[1]&&i(n,o[1],a,u,r,l),o[2]&&i(n,o[2],e,l,a,f),o[3]&&i(n,o[3],a,l,r,f)}}function f(n,t,e,u,r,i,f){var a,l=1/0;return function o(n,s,c,d,h){if(!(s>i||c>f||u>d||r>h)){if(null!=n.x){var v=t-n.x,x=e-n.y,y=v*v+x*x;if(l>y){var p=Math.sqrt(l=y);u=t-p,r=e-p,i=t+p,f=e+p,a=n}}for(var g=n.nodes,b=(s+d)/2,m=(c+h)/2,N=t>=b,k=e>=m,q=k<<1|N,w=q+4;w>q;++q)if(n=g[3&q])switch(3&q){case 0:o(n,s,c,b,m);break;case 1:o(n,b,c,d,m);break;case 2:o(n,s,m,b,h);break;case 3:o(n,b,m,d,h)}}}(n,u,r,i,f),a&&a.data}function a(){function n(n){function t(n,t,u,r,i,f,a,l){if(!isNaN(u)&&!isNaN(r))if(n.leaf){var o=n.x,s=n.y;if(null!=o)if(Math.abs(o-u)+Math.abs(s-r)<.01)e(n,t,u,r,i,f,a,l);else{var c=n.data;n.x=n.y=n.data=null,e(n,c,o,s,i,f,a,l),e(n,t,u,r,i,f,a,l)}else n.x=u,n.y=r,n.data=t}else e(n,t,u,r,i,f,a,l)}function e(n,e,u,i,f,a,l,o){var s=(f+l)/2,c=(a+o)/2,d=u>=s,h=i>=c,v=h<<1|d;n.leaf=!1,n=n.nodes[v]||(n.nodes[v]=new r),d?f=s:l=s,h?a=c:o=c,t(n,e,u,i,f,a,l,o)}var h,v,x,y,p,g,b,m,N,k="function"==typeof c?c:u(c),q="function"==typeof d?d:u(d);if(n||(n=[]),null!=a)g=a,b=o,m=l,N=s;else for(m=N=-(g=b=1/0),v=[],x=[],p=n.length,y=0;p>y;++y){var w=+k(h=n[y],y,n),M=+q(h,y,n);g>w&&(g=w),b>M&&(b=M),w>m&&(m=w),M>N&&(N=M),v.push(w),x.push(M)}var F=m-g,j=N-b;isFinite(F)&&isFinite(j)&&(F>j?N=b+F:m=g+j);var z=new r;if(z.add=function(n){return t(z,n,+k(n,++y),+q(n,y),g,b,m,N),z},z.visit=function(n){return i(n,z,g,b,m,N),z},z.find=function(n,t){return f(z,n,t,g,b,m,N)},y=-1,null==a){for(;++y<p;)t(z,n[y],v[y],x[y],g,b,m,N);--y}else n.forEach(z.add);return v=x=n=h=null,z}var a,l,o,s,c=t,d=e;return n.x=function(t){return arguments.length?(c=t,n):c},n.y=function(t){return arguments.length?(d=t,n):d},n.extent=function(t){return arguments.length?(null==t?a=o=l=s=null:(a=+t[0][0],o=+t[0][1],l=+t[1][0],s=+t[1][1]),n):null==a?null:[[a,o],[l,s]]},n.size=function(t){return arguments.length?(null==t?a=o=l=s=null:(a=o=0,l=+t[0],s=+t[1]),n):null==a?null:[l-a,s-o]},n}var l="0.2.1";n.version=l,n.quadtree=a});